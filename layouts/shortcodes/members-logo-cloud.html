{{/* Hugo shortcode for displaying members as a logo cloud */}}
{{ $orgs := $.Site.Data.org_summary }}
{{ if $orgs }}
<div class="container-fluid py-5">
  <div class="row g-4">
    {{ range $orgs }}
      {{ if and .name .logo_url }}
        {{ $safeName := .name | lower | replaceRE "[^a-z0-9]+" "_" }}
        {{ $logoPath := printf "members/images/%s" $safeName }}
        {{ $logoExists := false }}
        {{ range $ext := slice ".png" ".jpg" ".jpeg" ".svg" ".gif" }}
          {{ if fileExists (printf "content/%s%s" $logoPath $ext) }}
            {{ $logoExists = true }}
            {{ $logoPath = printf "%s%s" $logoPath $ext }}
            {{ break }}
          {{ end }}
        {{ end }}
        
        {{ if $logoExists }}
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="card border-0" style="background-color: #f8f9fa;">
            <div class="card-body d-flex flex-column justify-content-center align-items-center p-2 text-center">
              {{ if .url }}
              <a href="{{ .url }}" target="_blank" rel="noopener" class="text-decoration-none d-flex flex-column align-items-center">
                <img src="/{{ $logoPath }}" alt="{{ .name }}" class="img-fluid mb-3" style="max-height: 50px; max-width: 120px; ">
                <small class="text-dark fw-medium">{{ .name }}</small>
              </a>
              {{ else }}
              <img src="/{{ $logoPath }}" alt="{{ .name }}" class="img-fluid mb-3" style="max-height: 50px; max-width: 120px; ">
              <small class="text-dark fw-medium">{{ .name }}</small>
              {{ end }}
            </div>
          </div>
        </div>
        {{ end }}
      {{ end }}
    {{ end }}
  </div>
</div>
{{ else }}
<div class="alert alert-info">
  <p class="mb-0">No member organizations found. Run <code>python scripts/extract_org_logos.py</code> to generate the data.</p>
</div>
{{ end }}